(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,a(i.key),i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function i(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(t){var n=function(t,n){if("object"!==e(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,"string");if("object"!==e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===e(n)?n:String(n)}var s=n((function e(t,n){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"generateKeys",(function(e){var t=[];return e.forEach((function(e){var n=a.createKeyInstance(e,a.lang,a.dispatchInputVirtual);t.push(n.createKey()),a.keyElements.push(n)})),t})),i(this,"renderKeys",(function(e,t){return a.generateKeys(e).forEach((function(e){return t.append(e)})),t})),i(this,"renderKeyBoard",(function(){Object.keys(a.keys).forEach((function(e){var t=document.createElement("div");t.classList.add("keyboard__row"),a.keyboard.append(a.renderKeys(a.keys[e],t))}))})),i(this,"getInput",(function(){a.input=document.querySelector("textarea")})),i(this,"createLayoutStructure",(function(){a.page=document.createElement("div"),a.page.classList.add("page"),a.input=document.createElement("textarea"),a.input.classList.add("text-field"),a.input.id="textField",a.switchBtn=document.createElement("button"),a.switchBtn.classList.add("button"),a.switchBtn.textContent="Press Ctrl + Shift or Alt + Shift to switch language",a.switchBtn.id="switchLangBtn",a.keyboard=document.createElement("div"),a.keyboard.classList.add("keyboard"),a.body.append(a.page),a.page.append(a.input),a.page.append(a.switchBtn),a.page.append(a.keyboard)})),i(this,"initiate",(function(){a.createLayoutStructure(),a.renderKeyBoard(),a.switchBtn.addEventListener("click",a.changeLang),a.setListeners()})),i(this,"changeLang",(function(){a.lang=a.lang===a.LANGUAGES.ru?a.LANGUAGES.en:a.LANGUAGES.ru,localStorage.setItem("lang",a.lang),a.keyElements.forEach((function(e){return e.changeLang(a.lang)}))})),i(this,"handleKeyDown",(function(e){var t=a.keyElements.find((function(t){return t.getValues().some((function(t){return t===e.key}))}));t&&(t.highlight(),t.animate())})),i(this,"handleKeyUp",(function(e){var t=a.keyElements.find((function(t){return t.getValues().some((function(t){return t===e.key}))}));t&&(t.stopHighlight(),t.stopAnimate())})),i(this,"focusInput",(function(){a.input.focus()})),i(this,"toggleShift",(function(){a.shiftPressed=!a.shiftPressed;var e=a.keyElements.find((function(e){return"Shift"===e.getValues()[0]}));a.shiftPressed?e.hold():e.leave()})),i(this,"toggleCaps",(function(){a.capsPressed=!a.capsPressed;var e=a.keyElements.find((function(e){return"CapsLock"===e.getValues()[0]}));a.capsPressed?e.hold():e.leave()})),i(this,"dispatchInputVirtual",(function(e){var t=a.input.selectionStart;switch(e.chars.main){case"Backspace":a.input.value=a.input.value.substring(0,a.input.selectionStart-1)+a.input.value.substring(a.input.selectionEnd,a.input.value.length),a.input.selectionStart=0!==t?t-1:t,a.input.selectionEnd=0!==t?t-1:t;break;case"Delete":a.input.value=a.input.value.substring(0,a.input.selectionStart)+a.input.value.substring(a.input.selectionEnd+1,a.input.value.length),a.input.selectionStart=t,a.input.selectionEnd=t;break;case"Shift":a.toggleShift();break;case"CapsLock":a.toggleCaps();break;case"ArrowRight":a.input.selectionStart+=1;break;case"Alt":case"Control":a.shiftPressed&&(a.changeLang(),a.toggleShift());break;case"ArrowLeft":a.input.selectionStart-=1,a.input.selectionEnd-=1;break;case"Enter":a.input.value="".concat(a.input.value.substring(0,a.input.selectionStart),"\n").concat(a.input.value.substring(a.input.selectionEnd,a.input.value.length)),a.input.selectionStart=t+1,a.input.selectionEnd=t+1;break;default:if(!e.key.charKey)return;if(a.shiftPressed){var n=e.chars.shift?e.chars.shift:e.chars.main;a.input.value=a.input.value.substring(0,a.input.selectionStart)+n+a.input.value.substring(a.input.selectionEnd,a.input.value.length),a.toggleShift(),a.input.selectionStart=t+1,a.input.selectionEnd=t+1}else if(a.capsPressed){var i=e.chars.shift?e.chars.shift:e.chars.main;a.input.value=a.input.value.substring(0,a.input.selectionStart)+i+a.input.value.substring(a.input.selectionEnd,a.input.value.length),a.input.selectionStart=t+1,a.input.selectionEnd=t+1}else a.input.value=a.input.value.substring(0,a.input.selectionStart)+e.chars.main+a.input.value.substring(a.input.selectionEnd,a.input.value.length),a.input.selectionStart=t+1,a.input.selectionEnd=t+1}})),i(this,"setListeners",(function(){document.addEventListener("keydown",a.handleKeyDown),document.addEventListener("keyup",(function(e){a.handleKeyUp(e)})),window.addEventListener("mouseup",(function(){a.keyElements.forEach((function(e){e.stopHighlight(),e.stopAnimate()}))})),a.keyboard.addEventListener("mouseup",a.focusInput)})),this.createKeyInstance=n,this.keys=t,this.LANGUAGES={ru:"ru",en:"en"},this.lang=localStorage.getItem("lang"),this.body=document.querySelector(".root"),this.keyElements=[],this.initiate(),this.shiftPressed=!1,this.capsPressed=!1}));function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function h(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,o(i.key),i)}}function c(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){var t=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===r(t)?t:String(t)}var l=c((function e(t,n,i){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,"createKey",(function(){return a.keyEl=document.createElement("button"),a.keyEl.classList.add("keyboard__key"),a.keyEl.classList.add("keyboard__key_size_".concat(a.key.size)),a.keyCharMain=document.createElement("p"),a.keyCharMain.classList.add("keyboard__key-main"),a.keyCharShift=document.createElement("p"),a.keyCharShift.classList.add("keyboard__key-shift"),a.keyEl.append(a.keyCharMain),a.keyEl.append(a.keyCharShift),a.renderLangState(),a.setListeners(),a.keyEl})),u(this,"setCharset",(function(){a.key.en?a.chars="ru"===a.lang?a.key.ru:a.key.en:a.chars=a.key})),u(this,"renderLangState",(function(){var e,t,n;a.setCharset(),"Control"===a.chars.main?a.keyCharMain.textContent="Ctrl":"Meta"===a.chars.main?a.keyCharMain.textContent="Win":"ArrowUp"===a.chars.main?a.keyCharMain.textContent="Up":"ArrowLeft"===a.chars.main?a.keyCharMain.textContent="Lft":"ArrowRight"===a.chars.main?a.keyCharMain.textContent="Rght":"ArrowDown"===a.chars.main?a.keyCharMain.textContent="Dwn":"Delete"===a.chars.main?a.keyCharMain.textContent="Del":1===a.chars.main.length?a.keyCharMain.textContent=a.chars.main.toUpperCase():a.keyCharMain.textContent=a.chars.main,a.keyCharShift.textContent=(null===(e=a.chars)||void 0===e?void 0:e.shift)!==(null===(t=a.chars)||void 0===t?void 0:t.main.toUpperCase())?null===(n=a.chars)||void 0===n?void 0:n.shift:""})),u(this,"changeLang",(function(e){a.lang=e,a.renderLangState()})),u(this,"getValues",(function(){return[a.chars.main,a.chars.shift]})),u(this,"getContext",(function(){return a})),u(this,"highlight",(function(){a.keyEl.classList.add("keyboard__key_highlighted")})),u(this,"stopHighlight",(function(){a.keyEl.classList.remove("keyboard__key_highlighted")})),u(this,"animate",(function(){a.keyEl.classList.add("keyboard__key_pressed")})),u(this,"stopAnimate",(function(){a.keyEl.classList.remove("keyboard__key_pressed")})),u(this,"hold",(function(){a.keyCharMain.classList.add("keyboard__key-main_held")})),u(this,"leave",(function(){a.keyCharMain.classList.remove("keyboard__key-main_held")})),u(this,"setListeners",(function(){a.keyEl.addEventListener("mousedown",(function(){a.highlight(),a.animate(),a.dispatchInputVirt(a.getContext())}))})),this.dispatchInputVirt=i,this.key=t,this.lang=n}));new s({row1:[{charKey:!0,size:"s",en:{shift:"~",main:"`"},ru:{shift:"Ё",main:"ё"}},{charKey:!0,size:"s",shift:"!",main:"1"},{charKey:!0,size:"s",shift:"@",main:"2"},{charKey:!0,size:"s",shift:"#",main:"3"},{charKey:!0,size:"s",shift:"$",main:"4"},{charKey:!0,size:"s",shift:"%",main:"5"},{charKey:!0,size:"s",shift:"^",main:"6"},{charKey:!0,size:"s",shift:"&",main:"7"},{charKey:!0,size:"s",shift:"*",main:"8"},{charKey:!0,size:"s",shift:"(",main:"9"},{charKey:!0,size:"s",shift:")",main:"0"},{charKey:!0,size:"s",shift:"_",main:"-"},{charKey:!0,size:"s",shift:"+",main:"="},{charKey:!1,size:"xl",main:"Backspace"}],row2:[{charKey:!1,size:"m",main:"Tab"},{charKey:!0,size:"s",en:{shift:"Q",main:"q"},ru:{shift:"Й",main:"й"}},{charKey:!0,size:"s",en:{shift:"W",main:"w"},ru:{shift:"Ц",main:"ц"}},{charKey:!0,size:"s",en:{shift:"E",main:"e"},ru:{shift:"У",main:"у"}},{charKey:!0,size:"s",en:{shift:"R",main:"r"},ru:{shift:"К",main:"к"}},{charKey:!0,size:"s",en:{shift:"T",main:"t"},ru:{shift:"Е",main:"е"}},{charKey:!0,size:"s",en:{shift:"Y",main:"y"},ru:{shift:"Н",main:"н"}},{charKey:!0,size:"s",en:{shift:"U",main:"u"},ru:{shift:"Г",main:"г"}},{charKey:!0,size:"s",en:{shift:"I",main:"i"},ru:{shift:"Ш",main:"ш"}},{charKey:!0,size:"s",en:{shift:"O",main:"o"},ru:{shift:"Щ",main:"щ"}},{charKey:!0,size:"s",en:{shift:"P",main:"p"},ru:{shift:"З",main:"з"}},{charKey:!0,size:"s",en:{shift:"{",main:"["},ru:{shift:"Х",main:"х"}},{charKey:!0,size:"s",en:{shift:"}",main:"]"},ru:{shift:"Ъ",main:"ъ"}},{charKey:!0,size:"s",en:{shift:"|",main:"\\"},ru:{shift:"/",main:"\\"}},{charKey:!1,size:"s",main:"Delete"}],row3:[{charKey:!1,size:"xl",main:"CapsLock"},{charKey:!0,size:"s",en:{shift:"A",main:"a"},ru:{shift:"Ф",main:"ф"}},{charKey:!0,size:"s",en:{shift:"S",main:"s"},ru:{shift:"Ы",main:"ы"}},{charKey:!0,size:"s",en:{shift:"D",main:"d"},ru:{shift:"В",main:"в"}},{charKey:!0,size:"s",en:{shift:"F",main:"f"},ru:{shift:"А",main:"а"}},{charKey:!0,size:"s",en:{shift:"G",main:"g"},ru:{shift:"П",main:"п"}},{charKey:!0,size:"s",en:{shift:"H",main:"h"},ru:{shift:"Р",main:"р"}},{charKey:!0,size:"s",en:{shift:"J",main:"j"},ru:{shift:"О",main:"о"}},{charKey:!0,size:"s",en:{shift:"K",main:"k"},ru:{shift:"Л",main:"л"}},{charKey:!0,size:"s",en:{shift:"L",main:"l"},ru:{shift:"Д",main:"д"}},{charKey:!0,size:"s",en:{shift:":",main:";"},ru:{shift:"Ж",main:"ж"}},{charKey:!0,size:"s",en:{shift:'"',main:"'"},ru:{shift:"Э",main:"э"}},{charKey:!1,size:"l",main:"Enter"}],row4:[{charKey:!1,size:"xl",main:"Shift"},{charKey:!0,size:"s",main:"\\"},{charKey:!0,size:"s",en:{shift:"Z",main:"z"},ru:{shift:"Я",main:"я"}},{charKey:!0,size:"s",en:{shift:"X",main:"x"},ru:{shift:"Ч",main:"ч"}},{charKey:!0,size:"s",en:{shift:"C",main:"c"},ru:{shift:"С",main:"с"}},{charKey:!0,size:"s",en:{shift:"V",main:"v"},ru:{shift:"М",main:"м"}},{charKey:!0,size:"s",en:{shift:"B",main:"b"},ru:{shift:"И",main:"и"}},{charKey:!0,size:"s",en:{shift:"N",main:"n"},ru:{shift:"Т",main:"т"}},{charKey:!0,size:"s",en:{shift:"M",main:"m"},ru:{shift:"Ь",main:"ь"}},{charKey:!0,size:"s",en:{shift:"<",main:","},ru:{shift:"Б",main:"б"}},{charKey:!0,size:"s",en:{shift:">",main:"."},ru:{shift:"Ю",main:"ю"}},{charKey:!0,size:"s",en:{shift:"?",main:"/"},ru:{shift:",",main:"."}},{charKey:!1,size:"s",main:"ArrowUp"},{charKey:!1,size:"s",main:"Shift"}],row5:[{charKey:!1,size:"l",main:"Control"},{charKey:!1,size:"s",main:"Meta"},{charKey:!1,size:"s",main:"Alt"},{charKey:!0,size:"xxxl",main:" "},{charKey:!1,size:"s",main:"Alt"},{charKey:!1,size:"l",main:"Control"},{charKey:!1,size:"s",main:"ArrowLeft"},{charKey:!1,size:"s",main:"ArrowDown"},{charKey:!1,size:"s",main:"ArrowRight"}]},(function(e,t,n){return new l(e,t,n)}))})();